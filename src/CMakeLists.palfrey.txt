CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
PROJECT(nrtrack)

# Boost
SET(BOOST_INCLUDE_DIRS /home/jvalmadr/local/include)

# OpenCV
#FIND_PACKAGE(OpenCV COMPONENTS core highgui imgproc features2d nonfree video)
SET(OpenCV_INCLUDE_DIRS /home/jvalmadr/local/include)
SET(OpenCV_LINK_DIRS /home/jvalmadr/local/lib)
SET(OpenCV_LIBS opencv_core opencv_highgui opencv_imgproc
  opencv_features2d opencv_nonfree opencv_video)

INCLUDE_DIRECTORIES(${OpenCV_INCLUDE_DIRS})
LINK_DIRECTORIES(${OpenCV_LINK_DIRS})

# KLT
INCLUDE_DIRECTORIES("../klt")
LINK_DIRECTORIES("../klt")

# TBB for Shohei's SIFT
#ADD_DEFINITIONS(-DENABLE_TBB)
#INCLUDE_DIRECTORIES("/opt/tbb40_20120613oss/include")
#LINK_DIRECTORIES("/opt/tbb40_20120613oss/lib")

# Shohei's SIFT
#INCLUDE_DIRECTORIES("../sift-shohei")

ADD_EXECUTABLE(track-features
  track_features.cpp
  read_image.cpp
  tracker.cpp
  klt_tracker.cpp)
TARGET_LINK_LIBRARIES(track-features ${OpenCV_LIBS})
TARGET_LINK_LIBRARIES(track-features klt)

ADD_EXECUTABLE(track-features-bidirectional
  track_features_bidirectional.cpp
  read_image.cpp
  tracker.cpp
  klt_tracker.cpp)
TARGET_LINK_LIBRARIES(track-features-bidirectional ${OpenCV_LIBS})
TARGET_LINK_LIBRARIES(track-features-bidirectional klt)

ADD_EXECUTABLE(find-keypoints
  find_keypoints.cpp
  read_image.cpp)
TARGET_LINK_LIBRARIES(find-keypoints ${OpenCV_LIBS})
#TARGET_LINK_LIBRARIES(find-keypoints tbb)

ADD_EXECUTABLE(find-foreground-keypoints
  find_foreground_keypoints.cpp
  read_image.cpp)
TARGET_LINK_LIBRARIES(find-foreground-keypoints ${OpenCV_LIBS})

ADD_EXECUTABLE(extract-sift
  extract_sift.cpp
  read_image.cpp)
TARGET_LINK_LIBRARIES(extract-sift ${OpenCV_LIBS})
